# 패키지 매니저
## npm(Node Package Manager)
* 다른 사람들이 만들어 놓은 소스 코드들을 모아둔 저장소
* 남의 코드를 사용하여 프로그래밍 가능
* 이미 있는 기능을 구현할 필요가 없어 효율적
* 패키지 : npm에 업로드된 노드 모듈
* 모듈이 다른 모듈을 사용할 수 있듯이 패키지도 다른 패키지 사용 가능(의존 관계)

## package.json
* 현재 프로젝트에 대한 정보와 사용중인 패키지 정보(버전 정보 등) 담은 파일
* 노드 프로젝트 시작 전에 폴더 내부에 무조건 package.json부터 만들고 시작함(npm init 명령어 사용)
* 구성
    * package name: 패키지의 이름, package.json의 name 속성에 저장
    * version : 패키지의 버전, npm의 버전은 중요
    * entry point : 자바스크립트 실행 파일 진입점, 보통 마지막으로 module.exports를 하는 파일 지정, package.json의 main속성에 저장
    * test command : 코드를 테스트할 때 입력할 명령어를 의미, package.json scripts 속성 안의 test 속성에 저장됨
        * 콘솔에서 : npm run [스크립트 명령어] 로 실행 가능
        * start나 test 같은 스크립트는 run을 붙이지 않아도 실행됨
    * git repository : 코드를 저장해둔 깃 저장소 주조, 나중에 문제 제기 가능하고 코드 수정본 올릴 수 있음, repository속성에 저장됨
    * keywords : 키워드는 npm 공식 홈페이지에서 패키지를 쉽게 찾을 수 있게함 , keywords 속성에 저장됨
    * license : 해당 패키지의 라이센스 넣음 (MIT 등)
    * dependencies : install한 패키지와 버전 정보 들어있는 속성
    * dev-dependencies : 개발할때만 사용하는 패키지 정보 들어있는 속성(개발 편하게 하기 위해 사용한 패키지)
* 패키지 설치 
    * npm install(or i) [패키지 이름]을 package.json이 있는 폴더의 콘솔에서 입력 (npm i [패키지 이름] 도 가능)
    * npm install(or i) -D [패키지 이름] : 개발할때만 쓰이는 패키지 추가
    * npm i -g [패키지 이름] 
        * 전역 설치 ,패키지를 node_moudels 폴더가 아닌 npm이 설치되어있는 폴더로 다운
        * 남에게 배포시 설치 여부 알 수 없음 , 보통은 개발용으로 설치 후 npx 명령어로 사용함

* node_modules
    * 설치된 패키지들이 들어있는 곳
    * 하나의 패키지 설치하면 그 패키지와 의존하는 패키지도 함께 설치되는데 이러한 복잡한 의존관계 때문에 package.json이 요구됨
    * 용량이 크므로 배포시에는 제외하고 배포하고 package.json을 통해 다시 깔게 함(npm i 키워드만 해줌)
* package-lock.json
    * 직접 설치한 패키지 외에도 node_modules에 들어 있는 패키지들의 정확한 버전과 의존관계가 담겨져 있음


## 패키지 버전 이해하기
* 각각의 패키지는 모두 버전이 다르고 패키지 간의 의존 관계도 복잡하여 업그레이드 시 그것을 사용하는 다른 패키지에서 에러가 발생한다면 문제가 됨
* 이를 해결하기 위해 버전 번호를 어떻게 정하고 올려야 하는지 명시하는 규칙 등장 ->SemVer
* 노드 패키지들의 버전은 항상 세자리로 이루어지는 SemVer방식의 넘버링 사용
### SemVer
* 첫 번째 자리는 major 버전
    * 0이면 초기 개발 중
    * 1부터는 정식 버전을 의미
    * major 버전은 하위 호환이 안될 정도로 패키지의 내용이 수정 되었을 때 올림
    * ex) 1.5.0-> 2.0.0 업데이트 시 이전 사용자가 에러가 발생할 확률이 큼
* 두 번째 자리는 minor 버전
    * 하위 호환이 되는 기능 업데이트를 했을 때 올림
    * ex) 1.5.0->1.6.0으로 업데이트 했을 때 이전 버전 사용자가 아무 문제가 없어야 함
* 세번째 자리는 patch 버전 
    * 새로운 기능이 추가되었다기 보단 기존 기능에 문제가 있어 수정한 것을 내놓았을 때 patch 버전을 올림
* 버전 범위 기호
    * ^ : minor 버전까지만 설치하거나 업데이트 됨 EX) ^1.1.1 -> 1.1.1이상 부터 2.0.0미만 버전까지만 설치하거나 업데이트 됨
    * ~ : patch 버전까지만 설치하거나 업데이트 됨 ex) ~1.1.1 -> 1.1.1이상부터 1.2.0미만 버전까지 실행
    * >,<,>=,<=,= : 초과, 미만, 이상, 이하, 동일 뜻
    * @lastest : 가장 최근 배포판 설치
    * 사용 예 : npm i express@lastest, npm i express~1.1.1 
    * package.json에 적힌 버전 범위 기호 따라야 함
## npm 기타 명령어
* npm cli 사이트에서 확인 가능
* 자주 쓰는 명령어
    * npm outdated ([패키지명]) : 업데이트할 수 있는 패키지가 있는지 체크
    * npm update [패키지명] : 해당 패키지 업데이트 , package.json에 적힌 버전 범위 벗어나면 설치 안됨
    * npm uninstall [패키지명] : 해당 패키지를 제거하는 명령어
    * npm search [검색어] : npm의 패키지 검색 가능
    * npm info [패키지명] : 패키지의 세부 정보 
    * npm adduser : npm 로그인을 위한 명령어
    * npm logout : npm logout
    * npm version [버전] : package.json의 버전을 해당 버전으로 올림
    * npm deprecate [패키지명] [버전] [메시지] : 해당 패키지를 설치할 때 경고메시지를 띄우게 하는 명령어, 자신의 패키지에만 적용 가능
    * npm publish : 자신이 만든 패키지를 배포할 때 사용
    * npm unpublish [패키지 명] --force : 배포한 패키지를 제거할 때 사용 (24시간 이내 배포한 패키지만 가능(의존성 관계 때문에))

