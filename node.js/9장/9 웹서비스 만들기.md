# 9. 익스프레스로 SNS 서비스 만들기 및 복습
* 로그인, 이미지 업로드, 게시글 작성, 게시글 작성, 해시태그 검색, 팔로잉 등의 기능이 있는 SNS NodeBird 앱 만들기

## 프로젝트 구조
* views : 템플릿 파일 넣을 폴더
* routes : 라우터를 넣을 폴더
* public : 정적 파일을 넣을 폴더
* passport : passport 패키지를 위한
* config, migration, models, seeders : sequelize 관련 폴더

## 여러 복습 및 필기
* npx 명령어 : 패키지를 실행시키는 명령어중 하나, npm 5.2.0 이상이 깔려있으면 실행가능
* express-session 옵션
    * resave : 요청이 올 때 세션에 수정사항이 생기지 않더라도 세션 다시 설정여부
    * saveUninitialized : 세션에 저장할 내역이 없더라도 처음부터 세션 생성여부
    * secret : 세션 쿠키를 서명하기 위한 값
    * cookie : 세션 쿠키의 옵션 
    * name : 세션쿠키의 이름
    * store : 외부 저장소랑 연결할 때 사용하는 옵션

* 시퀄라이즈 설정을 담아둔 config.json에는 유일하게 하드 코딩된 비밀번호 남아있으며 JSON 파일이기 때문에 .env 사용도 불가능
    * 비밀번호 숨기는 법은 추후에 알아보기

* page.js설명
    * GET/profile , GET/join, GET/ 3개의 페이지로 구성
    * 템플릿 엔진에서 사용할 user, followingCount, followerCount, followerList 변수를 res.locals로 설정
        * res.locals로 설정하는 이유 : 모든 템플릿엔진에서 공통으로 사용하기 때문에

* DB 관계 설명
    * User와 Post -> 1:N관계
    * User와 User
        * N:M 관계
        * 팔로잉기능이 대표적 N:M 관계
        * 같은 테이블간의 N:M관계에서는 모델 이름과 컬럼 이름을 따로 정해야함
            * through 옵션을 통해 생성할 모델 이름 지정 
            * 누가 following이고 follower인지 구분하기위해 foreignkey에는 userid로 그냥 넣지 않고 구분하여 설정함
            * as옵션 : 둘다 같은 모델이므로 구분하기 위해 foreignkey와 반대되는 모델을 가리킴, 현재 모델의 표현?
    * Post와 Hashtag 
        * N:M관계
* 자동으로 생성된 모델도 쿼리 호출이나 관계 메서드 사용 가능함
    * ex) db.sequelize.models.PostHashtag
* DB 생성 : npx sequelize db:create 로 생성